<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>lighthouse-influxdb-grafana send form</title>
  <style>
    label {
      color: gray;
    }

    input::-webkit-calendar-picker-indicator {
      display: none;
    }

    .hide-input {
      width: 0;
      height: 0;
      padding: 0;
      border: 0;
      margin: 0;
    }
  </style>
</head>
<body>
<form id="formElem">
  <input
    class="hide-input"
    type="submit"
    aria-hidden="true"
    tabindex="-1"
  >
  <label for="env">env</label>
  <input type="text" id="env" name="env" value="trunk">
  <label for="site">site</label>
  <input type="text" id="site" name="site" value="some-site">
  <label for="tag">tag</label>
  <input type="text" id="tag" name="tag" value="1.58">
  <input type="submit" value="Run test">
</form>

<script>

  createInputWithOptions(document.getElementById('env'), [1, 2, 3, 4], 1);
  createInputWithOptions(document.getElementById('site'), [1, 2, 3, 4], 1);

  formElem.onsubmit = async (e) => {

    const url = 'http://fosemberg.dev.test-ru.dom:3000';

    e.preventDefault();

    const formData = new FormData(formElem);
    const getParams = `?${new URLSearchParams(formData).toString()}`;
    console.log(formData);

    let response = await fetch(`${url}/${getParams}`);

    let result = await response.json();

    console.log(result.message);
  };
</script>
</body>
</html>
